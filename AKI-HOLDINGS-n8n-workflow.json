{
    "name": "AKI HOLDINGS - Main Orchestration System",
    "nodes": [
          {
                  "parameters": {
                            "path": "ceo-input",
                            "responseMode": "onReceived"
                  },
                  "id": "webhook-trigger",
                  "name": "CEO Input Webhook",
                  "type": "n8n-nodes-base.webhook",
                  "typeVersion": 1,
                  "position": [250, 300]
          },
          {
                  "parameters": {
                            "functionCode": "// AKI HOLDINGS - Complete AI Organization System\nconst claudeKey = 'sk-ant-api03-h9u...lAAA';\nconst input = $input.all();\n\nconst taskData = input[0].json.body || {};\nconst task = taskData.task || 'Analyze: Create a comprehensive report on market trends';\nconst userId = taskData.userId || 'CEO_USER';\n\n// 1. TASK DECOMPOSITION - Claude분석을 통한 작업 분해\nconst taskDecompositionPrompt = `당신은 AKI HOLDINGS의 최고 경영진 AI입니다.\n\n다음 작업을 7개 부서로 분해하세요:\n${task}\n\n응답 형식 (JSON):\n{\n  \"task_id\": \"UUID\",\n  \"original_task\": \"${task}\",\n  \"departments\": {\n    \"research\": {\"task\": \"...\", \"priority\": 1, \"resources\": \"...\"},\n    \"validation\": {\"task\": \"...\", \"priority\": 2, \"resources\": \"...\"},\n    \"operations\": {\"task\": \"...\", \"priority\": 3, \"resources\": \"...\"},\n    \"executive_assistant\": {\"task\": \"...\", \"priority\": 4, \"resources\": \"...\"},\n    \"backend_dev\": {\"task\": \"...\", \"priority\": 5, \"resources\": \"...\"},\n    \"frontend_dev\": {\"task\": \"...\", \"priority\": 6, \"resources\": \"...\"},\n    \"quant_analysis\": {\"task\": \"...\", \"priority\": 7, \"resources\": \"...\"}\n  },\n  \"timeline\": \"당신의 예상 완료 시간\",\n  \"budget\": \"예상 API 비용(USD)\"\n}`;\n\n// 2. DEPARTMENT MANAGER DEFINITIONS - 7개 부장급 AI 정의\nconst departmentManagers = {\n  \"research\": {\n    \"name\": \"AI-RES-001\",\n    \"title\": \"Research & Strategy Director\",\n    \"model\": \"claude-opus\",\n    \"capabilities\": [\"market_analysis\", \"trend_forecasting\", \"competitor_research\", \"data_aggregation\"],\n    \"specialistCount\": 15,\n    \"specialists\": []\n  },\n  \"validation\": {\n    \"name\": \"AI-VAL-001\",\n    \"title\": \"Quality & Validation Director\",\n    \"model\": \"claude-sonnet\",\n    \"capabilities\": [\"risk_assessment\", \"logic_validation\", \"roi_calculation\", \"security_audit\"],\n    \"specialistCount\": 10,\n    \"specialists\": []\n  },\n  \"operations\": {\n    \"name\": \"AI-OPS-001\",\n    \"title\": \"Operations & Execution Director\",\n    \"model\": \"gpt-4o\",\n    \"capabilities\": [\"execution_management\", \"monitoring\", \"incident_response\", \"resource_allocation\"],\n    \"specialistCount\": 12,\n    \"specialists\": []\n  },\n  \"executive_assistant\": {\n    \"name\": \"AI-EA-001\",\n    \"title\": \"Executive Assistant Director\",\n    \"model\": \"claude-haiku\",\n    \"capabilities\": [\"scheduling\", \"email_management\", \"document_creation\", \"reporting\"],\n    \"specialistCount\": 8,\n    \"specialists\": []\n  },\n  \"backend_dev\": {\n    \"name\": \"AI-DEV-001\",\n    \"title\": \"Backend Development Director\",\n    \"model\": \"claude-sonnet\",\n    \"capabilities\": [\"api_development\", \"database_design\", \"system_architecture\", \"devops\"],\n    \"specialistCount\": 18,\n    \"specialists\": []\n  },\n  \"frontend_dev\": {\n    \"name\": \"AI-DEV-002\",\n    \"title\": \"Frontend Development Director\",\n    \"model\": \"claude-sonnet\",\n    \"capabilities\": [\"ui_design\", \"ux_optimization\", \"component_development\", \"performance\"],\n    \"specialistCount\": 14,\n    \"specialists\": []\n  },\n  \"quant_analysis\": {\n    \"name\": \"AI-QNT-001\",\n    \"title\": \"Quantitative Analysis Director\",\n    \"model\": \"claude-opus\",\n    \"capabilities\": [\"statistical_analysis\", \"modeling\", \"backtesting\", \"optimization\"],\n    \"specialistCount\": 16,\n    \"specialists\": []\n  }\n};\n\n// 3. DYNAMIC SPECIALIST AGENT GENERATOR\nfunction generateSpecialistAgents(department, taskDescription, count) {\n  const specialists = [];\n  const roles = {\n    \"research\": [\"Web Scraper\", \"News Analyst\", \"Market Scanner\", \"Social Monitor\", \"Trend Predictor\"],\n    \"validation\": [\"Risk Evaluator\", \"Logic Validator\", \"ROI Calculator\", \"Security Auditor\"],\n    \"operations\": [\"Execution Agent\", \"Monitor Agent\", \"Incident Handler\", \"Resource Manager\"],\n    \"executive_assistant\": [\"Scheduler\", \"Email Manager\", \"Document Creator\", \"Reporter\"],\n    \"backend_dev\": [\"Python Developer\", \"Node Developer\", \"DB Designer\", \"API Developer\"],\n    \"frontend_dev\": [\"React Developer\", \"Chart Specialist\", \"UX Designer\", \"Component Dev\"],\n    \"quant_analysis\": [\"Statistician\", \"Probabilist\", \"Time Series Analyst\", \"Optimization Expert\"]\n  };\n  \n  const availableRoles = roles[department] || [];\n  \n  for (let i = 0; i < Math.min(count, 5); i++) {\n    const role = availableRoles[i % availableRoles.length];\n    specialists.push({\n      \"id\": `${department.toUpperCase()}-SPEC-${i + 1}`,\n      \"name\": role,\n      \"department\": department,\n      \"status\": \"active\",\n      \"capability\": taskDescription,\n      \"model\": \"claude-sonnet\",\n      \"created_at\": new Date().toISOString(),\n      \"performance_score\": 0.95\n    });\n  }\n  \n  return specialists;\n}\n\n// 4. TASK DISTRIBUTION ENGINE\nfunction distributeToAllDepartments(decomposedTasks) {\n  const distribution = {};\n  \n  for (const [dept, manager] of Object.entries(departmentManagers)) {\n    const deptTask = decomposedTasks[dept] || {};\n    const specialistCount = deptTask.required_specialists || manager.specialistCount;\n    \n    manager.specialists = generateSpecialistAgents(\n      dept,\n      deptTask.task || \"Execute assigned task\",\n      specialistCount\n    );\n    \n    distribution[dept] = {\n      \"manager\": manager,\n      \"task\": deptTask,\n      \"specialists_spawned\": manager.specialists.length,\n      \"status\": \"ready_for_execution\",\n      \"execution_plan\": {\n        \"parallel_execution\": true,\n        \"max_concurrent_agents\": Math.ceil(manager.specialists.length / 2),\n        \"timeout_seconds\": 300\n      }\n    };\n  }\n  \n  return distribution;\n}\n\n// 5. SHARED MEMORY SYSTEM\nconst sharedMemory = {\n  \"system_id\": \"AKI_HOLDINGS_V1\",\n  \"created_at\": new Date().toISOString(),\n  \"ceo_input\": task,\n  \"user_id\": userId,\n  \"session_id\": Math.random().toString(36).substring(7),\n  \"workflow_state\": {\n    \"decomposition\": \"pending\",\n    \"distribution\": \"pending\",\n    \"execution\": \"pending\",\n    \"evaluation\": \"pending\",\n    \"final_approval\": \"pending\"\n  },\n  \"cost_tracking\": {\n    \"total_api_calls\": 0,\n    \"total_cost_usd\": 0,\n    \"by_department\": {}\n  },\n  \"results_storage\": {}\n};\n\n// 6. RETURN ORCHESTRATION OBJECT\nreturn {\n  \"status\": \"workflow_initialized\",\n  \"task\": task,\n  \"claude_api_key\": claudeKey,\n  \"task_decomposition_prompt\": taskDecompositionPrompt,\n  \"department_managers\": departmentManagers,\n  \"shared_memory\": sharedMemory,\n  \"workflow_structure\": {\n    \"total_departments\": 7,\n    \"total_specialist_capacity\": Object.values(departmentManagers).reduce((sum, d) => sum + d.specialistCount, 0),\n    \"parallel_execution\": true,\n    \"estimated_execution_time_seconds\": 180\n  },\n  \"next_step\": \"Send to Claude for task decomposition\",\n  \"claude_request_ready\": true\n};"
